{% comment %}
Modal Component - A Bootstrap 5 modal dialog with customizable header, body, and footer.

Parameters:
- id: String (required) - Unique identifier for the modal
- title: String (required) - Modal title displayed in the header
- size: String (optional) - Modal size: 'sm', 'lg', or 'xl'
- close_text: String (optional) - Text for the close button (default: none)
- save_text: String (optional) - Text for the primary action button (default: none)
- save_id: String (optional) - ID for the primary action button
- fullscreen: Boolean (default: false) - Whether the modal should be fullscreen
- centered: Boolean (default: false) - Whether to vertically center the modal
- scrollable: Boolean (default: false) - Whether the modal body should be scrollable
- backdrop: String (optional) - Controls modal backdrop: 'static' or 'true'
- keyboard: Boolean (default: true) - Whether Escape key closes the modal
- content: String (optional) - HTML content for the modal body (alternative to block)

Usage:
{% include 'components/modal.html' with id="my-modal" title="Modal Title" size="lg" close_text="Close" save_text="Save" save_id="saveBtn" %}

JavaScript Integration:
```javascript
// Show the modal
const myModal = new bootstrap.Modal(document.getElementById('my-modal'))
myModal.show()

// Handle save button click
document.getElementById('saveBtn').addEventListener('click', function() {
    // Handle the save action
    myModal.hide()
})
```
{% endcomment %}

{% load django_bootstrap5 %}

<!-- Reusable Styled Modal Component -->
<div class="modal fade"
     id="{{ modal_id }}"
     tabindex="-1"
     aria-labelledby="{{ modal_id }}Label"
     aria-hidden="true"
     {% if modal_size %}data-bs-size="{{ modal_size }}"{% endif %}>
  <div class="modal-dialog {% if modal_size == 'lg' %}modal-lg{% elif modal_size == 'sm' %}modal-sm{% elif modal_size == 'xl' %}modal-xl{% endif %}">
    <div class="modal-content">
      <!-- Modal Header with background color -->
      <div class="modal-header {% if header_class %}{{ header_class }}{% else %}bg-primary text-white{% endif %}">
        <h5 class="modal-title" id="{{ modal_id }}Label">
          {% if icon %}<i class="fa fa-{{ icon }} me-2"></i>{% endif %}{{ title }}
        </h5>
        <button type="button" class="btn-close {% if header_class and header_class contains 'text-white' or header_class == 'bg-primary' %}btn-close-white{% endif %}" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>

      <!-- Modal Body -->
      <div class="modal-body">
        {{ body|safe }}
      </div>

      <!-- Modal Footer with buttons -->
      <div class="modal-footer">
        {% if show_footer_content %}
          <div class="me-auto">
            {{ footer_content|safe }}
          </div>
        {% endif %}

        {% if primary_btn_text %}
          {% bootstrap_button primary_btn_text button_class="btn-primary btn-round" id=primary_btn_id extra_classes="me-2" %}
        {% endif %}

        {% if cancel_btn_text or not hide_cancel %}
          {% bootstrap_button cancel_btn_text|default:"Close" button_class="btn-outline-secondary btn-round" extra_attrs="data-bs-dismiss=modal" %}
        {% endif %}
      </div>
    </div>
  </div>
</div>