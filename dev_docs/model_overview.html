<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GradeBench Model Overview & Associations</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.5;
            color: #333;
            margin: 0;
            padding: 20px;
            background-color: #f8f9fa;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            padding: 20px;
        }
        h1 {
            text-align: center;
            color: #2c3e50;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
            margin-bottom: 30px;
        }
        h2 {
            color: #2980b9;
            border-left: 4px solid #3498db;
            padding-left: 10px;
            margin-top: 30px;
        }
        h3 {
            color: #16a085;
            margin-top: 20px;
        }
        .app-container {
            margin-bottom: 40px;
            padding: 15px;
            border: 1px solid #e1e1e1;
            border-radius: 5px;
            background-color: #f9f9f9;
        }
        .model-box {
            border: 1px solid #ccc;
            border-radius: 5px;
            padding: 15px;
            margin-bottom: 20px;
            background-color: #fff;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }
        .model-name {
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 1.2em;
        }
        .field {
            margin-bottom: 5px;
            padding: 3px 8px;
            border-left: 2px solid #e1e1e1;
        }
        .field-name {
            font-weight: 500;
            color: #333;
        }
        .field-type {
            color: #7f8c8d;
            font-style: italic;
        }
        .relationship {
            color: #e74c3c;
            font-weight: 500;
        }
        .notes {
            margin-top: 10px;
            padding: 8px;
            background-color: #f0f7fb;
            border-left: 3px solid #3498db;
            font-size: 0.9em;
        }
        .diagram-container {
            width: 100%;
            height: 800px;
            border: 1px solid #ccc;
            margin: 30px 0;
            position: relative;
        }
        #er-diagram {
            width: 100%;
            height: 100%;
        }
        .legend {
            margin-top: 30px;
            padding: 15px;
            background-color: #f8f9fa;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .legend-item {
            display: flex;
            align-items: center;
            margin-bottom: 8px;
        }
        .legend-color {
            width: 20px;
            height: 20px;
            margin-right: 10px;
            border-radius: 4px;
        }
        .nav-tabs {
            display: flex;
            list-style: none;
            padding: 0;
            margin: 20px 0 0;
            border-bottom: 1px solid #dee2e6;
        }
        .nav-tabs li {
            margin-right: 5px;
        }
        .nav-tabs a {
            display: block;
            padding: 8px 15px;
            text-decoration: none;
            color: #495057;
            background-color: #f8f9fa;
            border: 1px solid #dee2e6;
            border-bottom: none;
            border-radius: 4px 4px 0 0;
        }
        .nav-tabs a.active {
            color: #007bff;
            background-color: #fff;
            border-bottom: 2px solid #fff;
            margin-bottom: -1px;
            font-weight: bold;
        }
        .tab-content {
            padding: 20px;
            border: 1px solid #dee2e6;
            border-top: none;
            border-radius: 0 0 4px 4px;
        }
        .tab-pane {
            display: none;
        }
        .tab-pane.active {
            display: block;
        }
        svg {
            width: 100%;
            height: 800px;
            border: 1px solid #ddd;
            border-radius: 5px;
            margin: 20px 0;
        }
    </style>
    <script src="js/mermaid-loader.js"></script>
</head>
<body>
    <div class="container">
        <h1>GradeBench Model Overview & Associations</h1>
        
        <ul class="nav-tabs">
            <li><a href="#diagram-tab" class="active">ER Diagram</a></li>
            <li><a href="#models-tab">Model Details</a></li>
            <li><a href="#associations-tab">Associations</a></li>
        </ul>
        
        <div class="tab-content">
            <!-- ER Diagram Tab -->
            <div id="diagram-tab" class="tab-pane active">
                <div class="mermaid">
erDiagram
    %% Core App Models
    User ||--|| UserProfile : has
    UserProfile ||--o| StudentProfile : has
    UserProfile ||--o| ProfessorProfile : has
    UserProfile ||--o| TAProfile : has
    UserProfile }|--o{ GitHubToken : accesses
    StaffProfile }|--o{ GitHubToken : uses
    ProfessorProfile ||--o{ TAProfile : supervises
    Team ||--o{ Student : contains
    Team ||--o{ StudentProfile : contains
    
    %% Git Providers App
    Collaborator ||--|| Student : identifies
    Repository }|--o{ Collaborator : has
    GitHubOrganization ||--o{ Repository : contains
    
    %% Project Management App
    Member ||--|| Student : identifies
    Project }|--o{ Member : has
    
    %% LMS App
    CanvasEnrollment ||--|| Student : enrolls
    Course }|--o{ CanvasEnrollment : has
    
    %% Integrations App
    GradeLink ||--|| Student : links
    ProviderAssociation ||--|| Student : associates
    
    %% User Auth Model
    User {
        int id PK
        string username
        string email
        string first_name
        string last_name
        datetime date_joined
    }
    
    %% Core Models
    UserProfile {
        int id PK
        int user_id FK
        string github_username
        string github_access_token
        string github_avatar_url
        image profile_picture
        string phone_number
        text bio
        datetime created_at
        datetime updated_at
    }
    
    GitHubToken {
        int id PK
        string name
        string token
        string scope
        datetime last_used
        int rate_limit_remaining
        datetime rate_limit_reset
        datetime created_at
        datetime updated_at
    }
    
    ProfessorProfile {
        int id PK
        int user_profile_id FK
        string department
        string office_location
        text office_hours
    }
    
    TAProfile {
        int id PK
        int user_profile_id FK
        int supervisor_id FK
        int hours_per_week
        text expertise_areas
    }
    
    Team {
        int id PK
        string name
        text description
        string github_organization
        string github_team_id
        string taiga_project_id
        datetime created_at
        datetime updated_at
    }
    
    Student {
        int id PK
        string first_name
        string last_name
        string email
        string student_id
        int team_id FK
        string github_username
        string taiga_username
        string canvas_user_id
        datetime created_at
        datetime updated_at
        int created_by_id FK
    }
    
    StudentProfile {
        int id PK
        int user_profile_id FK
        string student_id
        int team_id FK
        string github_username
        string taiga_username
    }
    
    %% Git Provider Models
    Repository {
        int id PK
        int organization_id FK
        string name
        string full_name
        string description
        string html_url
        boolean private
        string default_branch
        datetime created_at
        datetime updated_at
        datetime last_accessed
        int created_by_id FK
    }
    
    GitHubOrganization {
        int id PK
        string name
        string url
        string avatar_url
        string description
        datetime created_at
        datetime updated_at
        int created_by_id FK
    }
    
    Collaborator {
        int id PK
        int student_id FK
        string username
        string name
        string email
        string avatar_url
        int contributions
        datetime first_contribution
        datetime last_contribution
        datetime created_at
        datetime updated_at
    }
    
    %% Project Management Models
    Project {
        int id PK
        string name
        string slug
        string description
        datetime created_date
        int team_id FK
        datetime sync_date
        datetime created_at
        datetime updated_at
        int created_by_id FK
    }
    
    Member {
        int id PK
        int student_id FK
        string username
        string full_name
        string role
        string bio
        string photo
        datetime created_at
        datetime updated_at
    }
    
    %% LMS Models
    Course {
        int id PK
        string name
        string course_code
        int canvas_id
        string url
        datetime start_date
        datetime end_date
        datetime created_at
        datetime updated_at
        int created_by_id FK
    }
    
    CanvasEnrollment {
        int id PK
        int student_id FK
        int course_id FK
        string role
        string status
        datetime created_at
        datetime updated_at
    }
    
    %% Integration Models
    GradeLink {
        int id PK
        int student_id FK
        string source_type
        string source_id
        string target_type
        string target_id
        datetime created_at
        datetime updated_at
        int created_by_id FK
    }
    
    ProviderAssociation {
        int id PK
        int student_id FK
        string provider_type
        string provider_id
        string username
        string data
        datetime created_at
        datetime updated_at
    }
                </div>
                
                <div class="legend">
                    <h3>Legend</h3>
                    <div class="legend-item">
                        <div class="legend-color" style="background-color: #3498db;"></div>
                        <div>Core App Models</div>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background-color: #e74c3c;"></div>
                        <div>Git Providers App Models</div>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background-color: #2ecc71;"></div>
                        <div>Project Management App Models</div>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background-color: #f39c12;"></div>
                        <div>LMS App Models</div>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background-color: #9b59b6;"></div>
                        <div>Integrations App Models</div>
                    </div>
                    <p><strong>Relationship Notation:</strong></p>
                    <ul>
                        <li><code>||--||</code> - One-to-One relationship</li>
                        <li><code>||--o{</code> - One-to-Many relationship</li>
                        <li><code>}|--o{</code> - Many-to-Many relationship</li>
                    </ul>
                </div>
            </div>
            
            <!-- Models Details Tab -->
            <div id="models-tab" class="tab-pane">
                <h2>Core App Models</h2>
                <div class="app-container">
                    <div class="model-box">
                        <div class="model-name">UserProfile</div>
                        <div class="field">
                            <span class="field-name">user</span>: 
                            <span class="field-type">OneToOneField(User)</span>
                            <span class="relationship">← One-to-One with Django User model</span>
                        </div>
                        <div class="field">
                            <span class="field-name">github_username</span>: 
                            <span class="field-type">CharField</span>
                        </div>
                        <div class="field">
                            <span class="field-name">github_access_token</span>: 
                            <span class="field-type">CharField</span>
                        </div>
                        <div class="field">
                            <span class="field-name">github_avatar_url</span>: 
                            <span class="field-type">URLField</span>
                        </div>
                        <div class="field">
                            <span class="field-name">profile_picture</span>: 
                            <span class="field-type">ImageField</span>
                        </div>
                        <div class="field">
                            <span class="field-name">phone_number</span>: 
                            <span class="field-type">CharField</span>
                        </div>
                        <div class="field">
                            <span class="field-name">bio</span>: 
                            <span class="field-type">TextField</span>
                        </div>
                        <div class="field">
                            <span class="field-name">created_at</span>: 
                            <span class="field-type">DateTimeField</span>
                        </div>
                        <div class="field">
                            <span class="field-name">updated_at</span>: 
                            <span class="field-type">DateTimeField</span>
                        </div>
                        <div class="notes">
                            Base user profile for all user types. Created automatically for each User through post_save signal.
                        </div>
                    </div>

                    <div class="model-box">
                        <div class="model-name">GitHubToken</div>
                        <div class="field">
                            <span class="field-name">name</span>: 
                            <span class="field-type">CharField</span>
                        </div>
                        <div class="field">
                            <span class="field-name">token</span>: 
                            <span class="field-type">CharField</span>
                        </div>
                        <div class="field">
                            <span class="field-name">scope</span>: 
                            <span class="field-type">CharField</span>
                        </div>
                        <div class="field">
                            <span class="field-name">last_used</span>: 
                            <span class="field-type">DateTimeField</span>
                        </div>
                        <div class="field">
                            <span class="field-name">rate_limit_remaining</span>: 
                            <span class="field-type">IntegerField</span>
                        </div>
                        <div class="field">
                            <span class="field-name">rate_limit_reset</span>: 
                            <span class="field-type">DateTimeField</span>
                        </div>
                        <div class="notes">
                            Stores GitHub access tokens with rate limit information.
                        </div>
                    </div>

                    <div class="model-box">
                        <div class="model-name">StaffProfile (Abstract)</div>
                        <div class="field">
                            <span class="field-name">user_profile</span>: 
                            <span class="field-type">OneToOneField(UserProfile)</span>
                        </div>
                        <div class="field">
                            <span class="field-name">github_tokens</span>: 
                            <span class="field-type">ManyToManyField(GitHubToken)</span>
                            <span class="relationship">← Many-to-Many with GitHubToken</span>
                        </div>
                        <div class="field">
                            <span class="field-name">lms_access_token</span>: 
                            <span class="field-type">CharField</span>
                        </div>
                        <div class="field">
                            <span class="field-name">lms_refresh_token</span>: 
                            <span class="field-type">CharField</span>
                        </div>
                        <div class="field">
                            <span class="field-name">lms_token_expires</span>: 
                            <span class="field-type">DateTimeField</span>
                        </div>
                        <div class="notes">
                            Abstract base class for professor and TA profiles.
                        </div>
                    </div>

                    <div class="model-box">
                        <div class="model-name">ProfessorProfile</div>
                        <div class="field">
                            <span class="field-name">user_profile</span>: 
                            <span class="field-type">OneToOneField(UserProfile)</span>
                            <span class="relationship">← One-to-One with UserProfile</span>
                        </div>
                        <div class="field">
                            <span class="field-name">department</span>: 
                            <span class="field-type">CharField</span>
                        </div>
                        <div class="field">
                            <span class="field-name">office_location</span>: 
                            <span class="field-type">CharField</span>
                        </div>
                        <div class="field">
                            <span class="field-name">office_hours</span>: 
                            <span class="field-type">TextField</span>
                        </div>
                        <div class="notes">
                            Extends StaffProfile for professors with academic details.
                        </div>
                    </div>

                    <div class="model-box">
                        <div class="model-name">TAProfile</div>
                        <div class="field">
                            <span class="field-name">user_profile</span>: 
                            <span class="field-type">OneToOneField(UserProfile)</span>
                            <span class="relationship">← One-to-One with UserProfile</span>
                        </div>
                        <div class="field">
                            <span class="field-name">supervisor</span>: 
                            <span class="field-type">ForeignKey(ProfessorProfile)</span>
                            <span class="relationship">← Many-to-One with ProfessorProfile</span>
                        </div>
                        <div class="field">
                            <span class="field-name">hours_per_week</span>: 
                            <span class="field-type">PositiveIntegerField</span>
                        </div>
                        <div class="field">
                            <span class="field-name">expertise_areas</span>: 
                            <span class="field-type">TextField</span>
                        </div>
                        <div class="notes">
                            Extends StaffProfile for teaching assistants.
                        </div>
                    </div>

                    <div class="model-box">
                        <div class="model-name">Team</div>
                        <div class="field">
                            <span class="field-name">name</span>: 
                            <span class="field-type">CharField</span>
                        </div>
                        <div class="field">
                            <span class="field-name">description</span>: 
                            <span class="field-type">TextField</span>
                        </div>
                        <div class="field">
                            <span class="field-name">github_organization</span>: 
                            <span class="field-type">CharField</span>
                        </div>
                        <div class="field">
                            <span class="field-name">github_team_id</span>: 
                            <span class="field-type">CharField</span>
                        </div>
                        <div class="field">
                            <span class="field-name">taiga_project_id</span>: 
                            <span class="field-type">CharField</span>
                        </div>
                        <div class="notes">
                            Represents a student team with links to GitHub and Taiga.
                        </div>
                    </div>

                    <div class="model-box">
                        <div class="model-name">Student</div>
                        <div class="field">
                            <span class="field-name">first_name</span>: 
                            <span class="field-type">CharField</span>
                        </div>
                        <div class="field">
                            <span class="field-name">last_name</span>: 
                            <span class="field-type">CharField</span>
                        </div>
                        <div class="field">
                            <span class="field-name">email</span>: 
                            <span class="field-type">EmailField</span>
                        </div>
                        <div class="field">
                            <span class="field-name">student_id</span>: 
                            <span class="field-type">CharField</span>
                        </div>
                        <div class="field">
                            <span class="field-name">team</span>: 
                            <span class="field-type">ForeignKey(Team)</span>
                            <span class="relationship">← Many-to-One with Team</span>
                        </div>
                        <div class="field">
                            <span class="field-name">github_username</span>: 
                            <span class="field-type">CharField</span>
                        </div>
                        <div class="field">
                            <span class="field-name">taiga_username</span>: 
                            <span class="field-type">CharField</span>
                        </div>
                        <div class="field">
                            <span class="field-name">canvas_user_id</span>: 
                            <span class="field-type">CharField</span>
                        </div>
                        <div class="notes">
                            Central student entity that links identities across platforms. Not tied to the Django user system.
                        </div>
                    </div>

                    <div class="model-box">
                        <div class="model-name">StudentProfile</div>
                        <div class="field">
                            <span class="field-name">user_profile</span>: 
                            <span class="field-type">OneToOneField(UserProfile)</span>
                            <span class="relationship">← One-to-One with UserProfile</span>
                        </div>
                        <div class="field">
                            <span class="field-name">student_id</span>: 
                            <span class="field-type">CharField</span>
                        </div>
                        <div class="field">
                            <span class="field-name">team</span>: 
                            <span class="field-type">ForeignKey(Team)</span>
                            <span class="relationship">← Many-to-One with Team</span>
                        </div>
                        <div class="field">
                            <span class="field-name">github_username</span>: 
                            <span class="field-type">CharField</span>
                        </div>
                        <div class="field">
                            <span class="field-name">taiga_username</span>: 
                            <span class="field-type">CharField</span>
                        </div>
                        <div class="notes">
                            Legacy student profile model - maintained temporarily for backward compatibility.
                        </div>
                    </div>
                </div>

                <h2>Git Providers App Models</h2>
                <div class="app-container">
                    <div class="model-box">
                        <div class="model-name">Repository</div>
                        <div class="field">
                            <span class="field-name">organization</span>: 
                            <span class="field-type">ForeignKey(GitHubOrganization)</span>
                            <span class="relationship">← Many-to-One with GitHubOrganization</span>
                        </div>
                        <div class="field">
                            <span class="field-name">name</span>: 
                            <span class="field-type">CharField</span>
                        </div>
                        <div class="field">
                            <span class="field-name">full_name</span>: 
                            <span class="field-type">CharField</span>
                        </div>
                        <div class="field">
                            <span class="field-name">description</span>: 
                            <span class="field-type">CharField</span>
                        </div>
                        <div class="field">
                            <span class="field-name">html_url</span>: 
                            <span class="field-type">URLField</span>
                        </div>
                        <div class="field">
                            <span class="field-name">private</span>: 
                            <span class="field-type">BooleanField</span>
                        </div>
                        <div class="field">
                            <span class="field-name">default_branch</span>: 
                            <span class="field-type">CharField</span>
                        </div>
                        <div class="notes">
                            Represents a GitHub repository with metadata.
                        </div>
                    </div>

                    <div class="model-box">
                        <div class="model-name">GitHubOrganization</div>
                        <div class="field">
                            <span class="field-name">name</span>: 
                            <span class="field-type">CharField</span>
                        </div>
                        <div class="field">
                            <span class="field-name">url</span>: 
                            <span class="field-type">URLField</span>
                        </div>
                        <div class="field">
                            <span class="field-name">avatar_url</span>: 
                            <span class="field-type">URLField</span>
                        </div>
                        <div class="field">
                            <span class="field-name">description</span>: 
                            <span class="field-type">TextField</span>
                        </div>
                        <div class="notes">
                            Represents a GitHub organization hosting repositories.
                        </div>
                    </div>

                    <div class="model-box">
                        <div class="model-name">Collaborator</div>
                        <div class="field">
                            <span class="field-name">student</span>: 
                            <span class="field-type">ForeignKey(Student)</span>
                            <span class="relationship">← One-to-One with Student</span>
                        </div>
                        <div class="field">
                            <span class="field-name">username</span>: 
                            <span class="field-type">CharField</span>
                        </div>
                        <div class="field">
                            <span class="field-name">name</span>: 
                            <span class="field-type">CharField</span>
                        </div>
                        <div class="field">
                            <span class="field-name">email</span>: 
                            <span class="field-type">EmailField</span>
                        </div>
                        <div class="field">
                            <span class="field-name">avatar_url</span>: 
                            <span class="field-type">URLField</span>
                        </div>
                        <div class="field">
                            <span class="field-name">contributions</span>: 
                            <span class="field-type">IntegerField</span>
                        </div>
                        <div class="field">
                            <span class="field-name">first_contribution</span>: 
                            <span class="field-type">DateTimeField</span>
                        </div>
                        <div class="field">
                            <span class="field-name">last_contribution</span>: 
                            <span class="field-type">DateTimeField</span>
                        </div>
                        <div class="notes">
                            Represents a GitHub contributor linked to a student entity.
                        </div>
                    </div>
                </div>

                <h2>Project Management App Models</h2>
                <div class="app-container">
                    <div class="model-box">
                        <div class="model-name">Project</div>
                        <div class="field">
                            <span class="field-name">name</span>: 
                            <span class="field-type">CharField</span>
                        </div>
                        <div class="field">
                            <span class="field-name">slug</span>: 
                            <span class="field-type">SlugField</span>
                        </div>
                        <div class="field">
                            <span class="field-name">description</span>: 
                            <span class="field-type">TextField</span>
                        </div>
                        <div class="field">
                            <span class="field-name">team</span>: 
                            <span class="field-type">ForeignKey(Team)</span>
                            <span class="relationship">← Many-to-One with Team</span>
                        </div>
                        <div class="field">
                            <span class="field-name">created_date</span>: 
                            <span class="field-type">DateTimeField</span>
                        </div>
                        <div class="field">
                            <span class="field-name">sync_date</span>: 
                            <span class="field-type">DateTimeField</span>
                        </div>
                        <div class="notes">
                            Represents a project management project (e.g., Taiga project).
                        </div>
                    </div>

                    <div class="model-box">
                        <div class="model-name">Member</div>
                        <div class="field">
                            <span class="field-name">student</span>: 
                            <span class="field-type">ForeignKey(Student)</span>
                            <span class="relationship">← One-to-One with Student</span>
                        </div>
                        <div class="field">
                            <span class="field-name">username</span>: 
                            <span class="field-type">CharField</span>
                        </div>
                        <div class="field">
                            <span class="field-name">full_name</span>: 
                            <span class="field-type">CharField</span>
                        </div>
                        <div class="field">
                            <span class="field-name">role</span>: 
                            <span class="field-type">CharField</span>
                        </div>
                        <div class="field">
                            <span class="field-name">bio</span>: 
                            <span class="field-type">TextField</span>
                        </div>
                        <div class="field">
                            <span class="field-name">photo</span>: 
                            <span class="field-type">URLField</span>
                        </div>
                        <div class="notes">
                            Represents a project management platform member (e.g., Taiga user).
                        </div>
                    </div>
                </div>

                <h2>LMS App Models</h2>
                <div class="app-container">
                    <div class="model-box">
                        <div class="model-name">Course</div>
                        <div class="field">
                            <span class="field-name">name</span>: 
                            <span class="field-type">CharField</span>
                        </div>
                        <div class="field">
                            <span class="field-name">course_code</span>: 
                            <span class="field-type">CharField</span>
                        </div>
                        <div class="field">
                            <span class="field-name">canvas_id</span>: 
                            <span class="field-type">IntegerField</span>
                        </div>
                        <div class="field">
                            <span class="field-name">url</span>: 
                            <span class="field-type">URLField</span>
                        </div>
                        <div class="field">
                            <span class="field-name">start_date</span>: 
                            <span class="field-type">DateTimeField</span>
                        </div>
                        <div class="field">
                            <span class="field-name">end_date</span>: 
                            <span class="field-type">DateTimeField</span>
                        </div>
                        <div class="notes">
                            Represents a Canvas LMS course.
                        </div>
                    </div>

                    <div class="model-box">
                        <div class="model-name">CanvasEnrollment</div>
                        <div class="field">
                            <span class="field-name">student</span>: 
                            <span class="field-type">ForeignKey(Student)</span>
                            <span class="relationship">← Many-to-One with Student</span>
                        </div>
                        <div class="field">
                            <span class="field-name">course</span>: 
                            <span class="field-type">ForeignKey(Course)</span>
                            <span class="relationship">← Many-to-One with Course</span>
                        </div>
                        <div class="field">
                            <span class="field-name">role</span>: 
                            <span class="field-type">CharField</span>
                        </div>
                        <div class="field">
                            <span class="field-name">status</span>: 
                            <span class="field-type">CharField</span>
                        </div>
                        <div class="notes">
                            Links students to courses in the Canvas LMS.
                        </div>
                    </div>
                </div>

                <h2>Integrations App Models</h2>
                <div class="app-container">
                    <div class="model-box">
                        <div class="model-name">GradeLink</div>
                        <div class="field">
                            <span class="field-name">student</span>: 
                            <span class="field-type">ForeignKey(Student)</span>
                            <span class="relationship">← Many-to-One with Student</span>
                        </div>
                        <div class="field">
                            <span class="field-name">source_type</span>: 
                            <span class="field-type">CharField</span>
                        </div>
                        <div class="field">
                            <span class="field-name">source_id</span>: 
                            <span class="field-type">CharField</span>
                        </div>
                        <div class="field">
                            <span class="field-name">target_type</span>: 
                            <span class="field-type">CharField</span>
                        </div>
                        <div class="field">
                            <span class="field-name">target_id</span>: 
                            <span class="field-type">CharField</span>
                        </div>
                        <div class="notes">
                            Links different grading systems for a student.
                        </div>
                    </div>

                    <div class="model-box">
                        <div class="model-name">ProviderAssociation</div>
                        <div class="field">
                            <span class="field-name">student</span>: 
                            <span class="field-type">ForeignKey(Student)</span>
                            <span class="relationship">← Many-to-One with Student</span>
                        </div>
                        <div class="field">
                            <span class="field-name">provider_type</span>: 
                            <span class="field-type">CharField</span>
                        </div>
                        <div class="field">
                            <span class="field-name">provider_id</span>: 
                            <span class="field-type">CharField</span>
                        </div>
                        <div class="field">
                            <span class="field-name">username</span>: 
                            <span class="field-type">CharField</span>
                        </div>
                        <div class="field">
                            <span class="field-name">data</span>: 
                            <span class="field-type">JSONField</span>
                        </div>
                        <div class="notes">
                            Links a student to various external service providers.
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Associations Tab -->
            <div id="associations-tab" class="tab-pane">
                <h2>Core Associations</h2>
                <div class="app-container">
                    <ul>
                        <li><strong>User → UserProfile</strong>: One-to-One relationship. Each Django User has exactly one UserProfile.</li>
                        <li><strong>UserProfile → StudentProfile/ProfessorProfile/TAProfile</strong>: One-to-One relationships. Each UserProfile can optionally have one role-specific profile.</li>
                        <li><strong>UserProfile/StaffProfile → GitHubToken</strong>: Many-to-Many relationship. Profiles can have multiple GitHub tokens.</li>
                        <li><strong>ProfessorProfile → TAProfile</strong>: One-to-Many relationship. A professor can supervise multiple TAs.</li>
                        <li><strong>Team → Student/StudentProfile</strong>: One-to-Many relationship. A team can have multiple students.</li>
                    </ul>
                </div>

                <h2>Cross-App Associations</h2>
                <div class="app-container">
                    <h3>Student as the Central Entity</h3>
                    <p>The Student model serves as the central entity that connects various aspects of a student across different systems:</p>
                    <ul>
                        <li><strong>Student → Collaborator</strong>: One-to-One relationship with Git Provider's Collaborator model.</li>
                        <li><strong>Student → Member</strong>: One-to-One relationship with Project Management's Member model.</li>
                        <li><strong>Student → CanvasEnrollment</strong>: One-to-Many relationship with LMS's CanvasEnrollment model.</li>
                        <li><strong>Student → GradeLink/ProviderAssociation</strong>: One-to-Many relationships with Integrations models.</li>
                    </ul>

                    <h3>Organization Hierarchies</h3>
                    <ul>
                        <li><strong>GitHubOrganization → Repository</strong>: One-to-Many relationship. An organization can have multiple repositories.</li>
                        <li><strong>Repository → Collaborator</strong>: Many-to-Many relationship. Repositories can have multiple collaborators.</li>
                        <li><strong>Team → Project</strong>: One-to-Many relationship. A team can have multiple projects.</li>
                        <li><strong>Project → Member</strong>: Many-to-Many relationship. Projects can have multiple members.</li>
                        <li><strong>Course → CanvasEnrollment</strong>: One-to-Many relationship. A course can have multiple enrollments.</li>
                    </ul>
                </div>

                <h2>Key Relational Patterns</h2>
                <div class="app-container">
                    <h3>Central Identity Pattern</h3>
                    <p>The Student model acts as a central identity hub that connects different platform-specific identities (GitHub, Taiga, Canvas). This pattern allows for a decoupled architecture where:</p>
                    <ul>
                        <li>Each platform has its own models for storing platform-specific data</li>
                        <li>The Student entity provides the "glue" connecting these disparate systems</li>
                        <li>Each platform identity can point back to the central Student entity</li>
                    </ul>
                    
                    <h3>Composite Service Pattern</h3>
                    <p>The Integrations app provides models that create composite relationships between different services:</p>
                    <ul>
                        <li>GradeLink connects grading systems</li>
                        <li>ProviderAssociation creates generic associations between the student and external providers</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Mermaid is now initialized by the mermaid-loader.js
        
        // Tab functionality
        document.addEventListener('DOMContentLoaded', function() {
            const tabLinks = document.querySelectorAll('.nav-tabs a');
            
            tabLinks.forEach(function(link) {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    // Hide all tab panes
                    document.querySelectorAll('.tab-pane').forEach(function(pane) {
                        pane.classList.remove('active');
                    });
                    
                    // Remove active class from all tabs
                    tabLinks.forEach(function(tab) {
                        tab.classList.remove('active');
                    });
                    
                    // Add active class to clicked tab
                    this.classList.add('active');
                    
                    // Show the corresponding tab pane
                    const target = this.getAttribute('href').substring(1);
                    document.getElementById(target).classList.add('active');
                });
            });
        });
    </script>
</body>
</html>
